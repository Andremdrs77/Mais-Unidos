{% extends 'base.html' %}

{% block title %} Criar Campanha {% endblock %}

{% block titlePage %} Criar Campanha {% endblock %}

{% block style %}

<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');

    body.modal-open {
        overflow: hidden;
    }

    .form-container label {
        display: block;
        margin: 10px 0 5px;
        font-weight: 500;
        color: #333;
    }

    .form-container input,
    .form-container textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 15px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-sizing: border-box;
    }

    .form-container textarea {
        resize: vertical;
    }

    .form-group {
        flex: 1 1 calc(50% - 20px);
    }

    .radio-group {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
        padding: 5px 0;
    }

    .radio-group label {
        font-size: 16px;
        font-weight: 600;
        color: #05664f;
        padding-bottom: 3px;
        position: relative;
        cursor: pointer;
        text-transform: uppercase;
    }

    .radio-group label:after {
        content: '';
        display: block;
        width: 0%;
        height: 2px;
        background-color: #05664f;
        transition: width 0.3s;
        position: absolute;
        bottom: -2px;
        left: 0;
    }

    .radio-group input {
        display: none;
    }

    .radio-group input:checked + label {
        color: #333;
    }

    .radio-group input:checked + label:after {
        width: 100%;
    }

    .item-list {
        margin-top: 10px;
        width: 100%;
    }

    .item-row {
        display: flex;
        gap: 10px;
        align-items: center;
        justify-content: center;
        margin-bottom: 10px;
    }

    .item-row input {
        flex: 1;
    }

    .item-row .add-button,
    .item-row .remove-button {
        height: 100%;
        background-color: #05664f;
        color: #fff;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        cursor: pointer;
        margin-bottom: 15px;
    }

    .item-row .add-button:hover {
        background-color: #044f3b;
    }

    .item-row .remove-button {
        background-color: #ff6666;
    }

    .item-row .remove-button:hover {
        background-color: #cc3333;
    }

    .submit-button {
        padding: 10px 20px;
        background-color: #0d2329;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        flex: 1 1 100%;
    }

    .submit-button:hover {
        background-color: #08161a;
    }
</style>

{% endblock %}

{% block content %}

<div class="form-container">

    <form id="create-campaign-form">
        <div class="form-group">
            <label for="title">Título da Campanha</label>
            <input type="text" id="title" name="title" placeholder="Digite o título da campanha" required>
        </div>

        <div class="form-group">
            <label for="description">Descrição</label>
            <textarea id="description" name="description" placeholder="Digite a descrição da campanha" required></textarea>
        </div>

        <div class="radio-group">
            <input type="radio" name="goalType" value="financial" id="financial-goal" checked required>
            <label for="financial-goal">Meta Financeira</label>

            <input type="radio" name="goalType" value="items" id="items-goal">
            <label for="items-goal">Meta de Itens</label>
        </div>

        <div class="form-group" id="financial-goal-input">
            <input type="text" id="financial-input" name="financialGoal" placeholder="Digite a meta em R$">
        </div>

        <div class="form-group" id="items-goal-input" style="display: none;">
            <div id="items-list" class="item-list">
                <div class="item-row">
                    <input type="text" name="itemName[]" placeholder="Nome do item">
                    <input type="number" name="itemQuantity[]" placeholder="Quantidade" min="1">
                    <button type="button" id="add-item-button" class="add-button">+</button>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="deadline">Prazo</label>
            <input type="date" id="deadline" name="deadline" required>
        </div>

        <button type="submit" class="submit-button">Criar Campanha</button>
    </form>
</div>

<script>
    const financialGoalInput = document.getElementById('financial-goal-input');
    const itemsGoalInput = document.getElementById('items-goal-input');
    const financialRadio = document.getElementById('financial-goal');
    const itemsRadio = document.getElementById('items-goal');
    const addItemButton = document.getElementById('add-item-button');
    const itemsList = document.getElementById('items-list');

    financialRadio.addEventListener('change', () => {
        financialGoalInput.style.display = 'block';
        itemsGoalInput.style.display = 'none';
    });

    itemsRadio.addEventListener('change', () => {
        financialGoalInput.style.display = 'none';
        itemsGoalInput.style.display = 'block';
    });

    addItemButton.addEventListener('click', () => {
        const itemRow = document.createElement('div');
        itemRow.className = 'item-row';

        itemRow.innerHTML = `
            <input type="text" name="itemName[]" placeholder="Nome do item">
            <input type="number" name="itemQuantity[]" placeholder="Quantidade" min="1">
            <button type="button" class="remove-button">x</button>
        `;

        const removeButton = itemRow.querySelector('.remove-button');
        removeButton.addEventListener('click', () => {
            itemsList.removeChild(itemRow);
        });

        itemsList.appendChild(itemRow);
    });
</script>

{% endblock %}
